# æœ¬åœ°è¿è¡Œæ­¥éª¤è¯´æ˜

## ç¯å¢ƒæ£€æŸ¥ç»“æœ

âœ… **åŸºæœ¬æ£€æŸ¥é€šè¿‡ï¼**

- Node.js ç‰ˆæœ¬: v22.13.1
- npm ç‰ˆæœ¬: 10.9.2
- é¡¹ç›®ç»“æ„: å®Œæ•´

## ç¬¬ä¸€æ­¥ï¼šå®‰è£…é¡¹ç›®ä¾èµ–

åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œï¼š

```bash
npm install
```

è¿™å°†å®‰è£…æ‰€æœ‰å¿…éœ€çš„ä¾èµ–åŒ…ï¼ŒåŒ…æ‹¬ï¼š
- React 19
- Material UI 7.0
- Vite 6.2
- TypeScript 5.7
- ä»¥åŠå…¶ä»–å¼€å‘ä¾èµ–

*é¢„è®¡æ—¶é—´ï¼š2-5 åˆ†é’Ÿ*

## ç¬¬äºŒæ­¥ï¼šå¯åŠ¨å¼€å‘æœåŠ¡å™¨

### æ–¹å¼ä¸€ï¼šå‰ç«¯å¼€å‘æ¨¡å¼ï¼ˆæ¨èæ–°æ‰‹ï¼‰

è¿™æ˜¯æœ€ç®€å•çš„æ–¹å¼ï¼Œä½¿ç”¨ Mock æ•°æ®å¿«é€Ÿå¯åŠ¨å‰ç«¯ç•Œé¢ã€‚

```bash
npm run dev
```

**ç‰¹ç‚¹**ï¼š
- âœ… å¿«é€Ÿå¯åŠ¨
- âœ… æ— éœ€é…ç½®æ•°æ®åº“
- âœ… é€‚åˆå‰ç«¯å¼€å‘
- âŒ æ•°æ®ä¸ä¼šä¿å­˜
- âŒ æ— æ³•æµ‹è¯•å®Œæ•´åŠŸèƒ½

å¯åŠ¨æˆåŠŸåï¼Œæµè§ˆå™¨è®¿é—®ï¼š**http://localhost:5173**

### æ–¹å¼äºŒï¼šå®Œæ•´å¼€å‘æ¨¡å¼ï¼ˆæ¨èå¼€å‘è€…ï¼‰

æ­¤æ–¹å¼å¯åŠ¨å®Œæ•´çš„å‰åç«¯å¼€å‘ç¯å¢ƒã€‚

#### 2.1 å®‰è£… Wranglerï¼ˆå¦‚æœå°šæœªå®‰è£…ï¼‰

```bash
npm install -g wrangler
```

#### 2.2 åˆ›å»ºæœ¬åœ°æ•°æ®åº“é…ç½®

åˆ›å»º `wrangler.local.jsonc` æ–‡ä»¶ï¼š

```jsonc
{
  "$schema": "node_modules/wrangler/config-schema.json",
  "name": "mynav-local",
  "main": "worker/index.ts",
  "compatibility_date": "2025-04-05",
  "compatibility_flags": ["nodejs_compat"],
  "assets": {
    "not_found_handling": "single-page-application"
  },
  "observability": {
    "enabled": true
  },
  "d1_databases": [
    {
      "binding": "DB",
      "database_name": "mynav-local",
      "database_id": "local"
    }
  ],
  "vars": {
    "AUTH_ENABLED": "true",
    "AUTH_USERNAME": "admin",
    "AUTH_PASSWORD": "$2y$10$dXJ3SW6G7P50lGmMkkmwe.20cQQubK3.HZWzG3YB1tlRy.fqvM/BG",
    "AUTH_SECRET": "development-secret-key-change-in-production"
  }
}
```

#### 2.3 åˆå§‹åŒ–æ•°æ®åº“

```bash
wrangler d1 execute mynav-local --local --file=./init_table.sql
```

#### 2.4 å¯åŠ¨å¼€å‘æœåŠ¡å™¨

éœ€è¦æ‰“å¼€ä¸¤ä¸ªç»ˆç«¯çª—å£ï¼š

**ç»ˆç«¯ 1 - å¯åŠ¨ Workerï¼š**
```bash
wrangler dev --config wrangler.local.jsonc
```

**ç»ˆç«¯ 2 - å¯åŠ¨å‰ç«¯ï¼š**
```bash
VITE_USE_REAL_API=true npm run dev
```

è®¿é—®åœ°å€ï¼š
- å‰ç«¯ï¼šhttp://localhost:5173
- APIï¼šhttp://localhost:8788

ç™»å½•å‡­æ®ï¼š
- ç”¨æˆ·åï¼š`admin`
- å¯†ç ï¼š`password`

## ç¬¬ä¸‰æ­¥ï¼šè®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š**http://localhost:5173**

### åŠŸèƒ½æµ‹è¯•æ¸…å•

âœ… **åŸºç¡€åŠŸèƒ½**
- [ ] æŸ¥çœ‹å¯¼èˆªç«™ç•Œé¢
- [ ] åˆ‡æ¢æ˜æš—ä¸»é¢˜
- [ ] æŸ¥çœ‹åˆ†ç»„å’Œç«™ç‚¹

âœ… **ç¼–è¾‘åŠŸèƒ½**ï¼ˆéœ€è¦ç™»å½•ï¼‰
- [ ] ç‚¹å‡»"ç®¡ç†å‘˜ç™»å½•"æŒ‰é’®
- [ ] è¾“å…¥ç”¨æˆ·åå’Œå¯†ç 
- [ ] åˆ›å»ºæ–°åˆ†ç»„
- [ ] åˆ›å»ºæ–°ç«™ç‚¹
- [ ] ç¼–è¾‘ç«™ç‚¹ä¿¡æ¯
- [ ] åˆ é™¤åˆ†ç»„æˆ–ç«™ç‚¹

âœ… **æ‹–æ‹½æ’åº**
- [ ] ç‚¹å‡»"æ›´å¤šé€‰é¡¹" â†’ "ç¼–è¾‘æ’åº"
- [ ] æ‹–æ‹½åˆ†ç»„è°ƒæ•´é¡ºåº
- [ ] æ‹–æ‹½ç«™ç‚¹è°ƒæ•´é¡ºåº
- [ ] ç‚¹å‡»"ä¿å­˜æ’åº"æŒ‰é’®

âœ… **æœç´¢åŠŸèƒ½**
- [ ] åœ¨æœç´¢æ¡†è¾“å…¥å…³é”®è¯
- [ ] æŸ¥çœ‹æœç´¢ç»“æœ
- [ ] ç‚¹å‡»æœç´¢ç»“æœè·³è½¬

## ä½¿ç”¨è„šæœ¬ç®€åŒ–å¯åŠ¨

### 1. è¿è¡Œæµ‹è¯•è„šæœ¬

```bash
./æµ‹è¯•è„šæœ¬.sh
```

æ­¤è„šæœ¬ä¼šæ£€æŸ¥é¡¹ç›®é…ç½®å’Œç¯å¢ƒæ˜¯å¦æ­£ç¡®ã€‚

### 2. ä½¿ç”¨å¯åŠ¨è„šæœ¬

```bash
./å¯åŠ¨è„šæœ¬.sh
```

æ­¤è„šæœ¬æä¾›äº¤äº’å¼èœå•ï¼Œè‡ªåŠ¨å¤„ç†ç¯å¢ƒæ£€æŸ¥å’Œå¯åŠ¨æµç¨‹ã€‚

## å¸¸ç”¨å‘½ä»¤

### å‰ç«¯ç›¸å…³

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# é¢„è§ˆç”Ÿäº§ç‰ˆæœ¬
npm run preview

# ä»£ç æ ¼å¼åŒ–
npm run format

# ä»£ç æ£€æŸ¥
npm run lint
```

### Worker ç›¸å…³

```bash
# å¯åŠ¨ Worker å¼€å‘æœåŠ¡å™¨
wrangler dev

# ä½¿ç”¨æœ¬åœ°é…ç½®
wrangler dev --config wrangler.local.jsonc

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
wrangler tail
```

### æ•°æ®åº“ç›¸å…³

```bash
# åˆ›å»ºæœ¬åœ°æ•°æ®åº“
wrangler d1 create mynav-local

# æ‰§è¡Œ SQL æ–‡ä»¶
wrangler d1 execute mynav-local --local --file=./init_table.sql

# æŸ¥è¯¢æ•°æ®
wrangler d1 execute mynav-local --local --command="SELECT * FROM groups"
```

## æ•…éšœæ’æŸ¥

### é—®é¢˜ 1ï¼šç«¯å£è¢«å ç”¨

**é”™è¯¯ä¿¡æ¯**ï¼š`Port 5173 is already in use`

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# macOS/Linuxï¼šæŸ¥æ‰¾å¹¶åœæ­¢å ç”¨è¿›ç¨‹
lsof -ti:5173 | xargs kill -9

# æˆ–ä½¿ç”¨å…¶ä»–ç«¯å£
npm run dev -- --port 3000
```

### é—®é¢˜ 2ï¼šä¾èµ–å®‰è£…å¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š`npm ERR! code ERESOLVE`

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# æ¸…ç†ç¼“å­˜
rm -rf node_modules package-lock.json
npm cache clean --force

# é‡æ–°å®‰è£…
npm install
```

### é—®é¢˜ 3ï¼šTypeScript ç¼–è¯‘é”™è¯¯

**é”™è¯¯ä¿¡æ¯**ï¼šTypeScript ç¼–è¯‘é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# è·³è¿‡ç±»å‹æ£€æŸ¥ï¼ˆä»…ç”¨äºå¼€å‘ï¼‰
npm run dev -- --mode development

# æˆ–ä¿®å¤ç±»å‹é”™è¯¯
npm run lint
```

### é—®é¢˜ 4ï¼šWorker æ— æ³•å¯åŠ¨

**é”™è¯¯ä¿¡æ¯**ï¼š`Error: D1 database not found`

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# æ£€æŸ¥æ•°æ®åº“é…ç½®
cat wrangler.local.jsonc | grep database_id

# é‡æ–°åˆ›å»ºæ•°æ®åº“
wrangler d1 create mynav-local
```

## å¼€å‘æŠ€å·§

### 1. ä½¿ç”¨ Mock æ•°æ®å¿«é€Ÿå¼€å‘

å¦‚æœåªéœ€è¦ä¿®æ”¹å‰ç«¯ç•Œé¢ï¼Œä½¿ç”¨ Mock æ•°æ®æ¨¡å¼å¯ä»¥åŠ å¿«å¼€å‘é€Ÿåº¦ï¼š

```bash
npm run dev  # ä¸è®¾ç½® VITE_USE_REAL_API
```

### 2. å¯ç”¨çƒ­é‡è½½

Vite é»˜è®¤å¯ç”¨çƒ­é‡è½½ï¼Œä¿®æ”¹ä»£ç åæµè§ˆå™¨ä¼šè‡ªåŠ¨åˆ·æ–°ã€‚

### 3. æŸ¥çœ‹å®æ—¶æ—¥å¿—

```bash
# æŸ¥çœ‹å‰ç«¯æ§åˆ¶å°
# æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· (F12) â†’ Console

# æŸ¥çœ‹ Worker æ—¥å¿—
wrangler tail
```

### 4. æµ‹è¯•å“åº”å¼è®¾è®¡

åœ¨æµè§ˆå™¨ä¸­ï¼š
- æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
- ç‚¹å‡»è®¾å¤‡æ¨¡æ‹Ÿå™¨å›¾æ ‡ï¼ˆæˆ–æŒ‰ Ctrl+Shift+Mï¼‰
- é€‰æ‹©ä¸åŒè®¾å¤‡å°ºå¯¸æµ‹è¯•

### 5. è°ƒè¯• API è¯·æ±‚

åœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­ï¼š
- Network æ ‡ç­¾é¡µ
- ç­›é€‰ XHR/Fetch è¯·æ±‚
- æŸ¥çœ‹è¯·æ±‚å’Œå“åº”è¯¦æƒ…

## ä¸‹ä¸€æ­¥

1. ğŸ“– é˜…è¯»å®Œæ•´æ–‡æ¡£ï¼š`æœ¬åœ°è¿è¡ŒæŒ‡å—.md`
2. ğŸ¨ è‡ªå®šä¹‰ä¸»é¢˜å’Œæ ·å¼
3. ğŸ”§ é…ç½®åå°åŠŸèƒ½
4. ğŸ“¦ éƒ¨ç½²åˆ° Cloudflare Workers

## è·å–å¸®åŠ©

- ğŸ“š æŸ¥çœ‹é¡¹ç›®æ–‡æ¡£
- ğŸ› æŠ¥å‘Šé—®é¢˜
- ğŸ’¬ ç¤¾åŒºè®¨è®º

---

**ç¥æ‚¨å¼€å‘æ„‰å¿«ï¼** ğŸš€
